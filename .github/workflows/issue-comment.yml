name: ì´ìŠˆ ì»¤ë©˜íŠ¸ ìë™ ë“±ë¡

on:
  issues:
    types: [opened]

jobs:
  auto-issue-comment:
    runs-on: ubuntu-latest

    steps:
      - name: ì´ìŠˆ ì •ë³´ ë¶„ì„
        id: issue-analysis
        uses: actions/github-script@v6
        with:
          script: |
            const issue = context.payload.issue;
            const issueTitle = issue.title.toLowerCase();
            const issueBody = issue.body ? issue.body.toLowerCase() : '';
            const author = issue.user.login;

            // ì´ìŠˆ ìœ í˜• ë¶„ì„
            let issueType = 'general';
            let priority = 'medium';
            let template = '';

            if (issueTitle.includes('bug') || issueBody.includes('error') || issueBody.includes('ë¬¸ì œ')) {
              issueType = 'bug';
              priority = 'high';
              template = `
              ## ğŸ› ë²„ê·¸ ì‹ ê³  ì ‘ìˆ˜
              
              ì•ˆë…•í•˜ì„¸ìš” @${author}ë‹˜, ë²„ê·¸ ì‹ ê³ í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!
              
              ### ğŸ“‹ ë²„ê·¸ ì²˜ë¦¬ ì ˆì°¨
              1. **ì¬í˜„ í™•ì¸**: ê°œë°œíŒ€ì—ì„œ ë²„ê·¸ë¥¼ ì¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤
              2. **ì›ì¸ ë¶„ì„**: ê·¼ë³¸ ì›ì¸ì„ íŒŒì•…í•©ë‹ˆë‹¤
              3. **ìˆ˜ì • ê³„íš**: ìˆ˜ì • ë°©ë²•ê³¼ ì¼ì •ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤
              4. **í…ŒìŠ¤íŠ¸**: ì¶©ë¶„í•œ í…ŒìŠ¤íŠ¸ í›„ ë°°í¬í•©ë‹ˆë‹¤
              
              ### â° ì˜ˆìƒ ì²˜ë¦¬ ì‹œê°„
              - **ì‹¬ê°ë„ ë†’ìŒ**: 24ì‹œê°„ ì´ë‚´
              - **ì‹¬ê°ë„ ë³´í†µ**: 3-5ì¼ ì´ë‚´
              - **ì‹¬ê°ë„ ë‚®ìŒ**: 1-2ì£¼ ì´ë‚´
              
              ### ğŸ“ ì¶”ê°€ ì •ë³´ ìš”ì²­
              ë” ë¹ ë¥¸ ì²˜ë¦¬ë¥¼ ìœ„í•´ ë‹¤ìŒ ì •ë³´ë¥¼ ì¶”ê°€ë¡œ ì œê³µí•´ì£¼ì‹œë©´ ë„ì›€ì´ ë©ë‹ˆë‹¤:
              - ìš´ì˜ì²´ì œ ë° ë¸Œë¼ìš°ì € ì •ë³´
              - ì—ëŸ¬ ë¡œê·¸ (ìˆëŠ” ê²½ìš°)
              - ì¬í˜„ ë‹¨ê³„ì˜ ìƒì„¸ ì„¤ëª…
              - ìŠ¤í¬ë¦°ìƒ· (ê°€ëŠ¥í•œ ê²½ìš°)
              `;
            } else if (issueTitle.includes('feature') || issueTitle.includes('ê¸°ëŠ¥') || issueBody.includes('ì¶”ê°€')) {
              issueType = 'feature';
              priority = 'medium';
              template = `
              ## âœ¨ ê¸°ëŠ¥ ìš”ì²­ ì ‘ìˆ˜
              
              ì•ˆë…•í•˜ì„¸ìš” @${author}ë‹˜, ìƒˆë¡œìš´ ê¸°ëŠ¥ ì œì•ˆí•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!
              
              ### ğŸ“‹ ê¸°ëŠ¥ ê²€í†  ì ˆì°¨
              1. **ìš”êµ¬ì‚¬í•­ ë¶„ì„**: ì œì•ˆí•´ì£¼ì‹  ê¸°ëŠ¥ì„ ìì„¸íˆ ê²€í† í•©ë‹ˆë‹¤
              2. **ê¸°ìˆ ì  ê²€í† **: êµ¬í˜„ ê°€ëŠ¥ì„±ê³¼ ë°©ë²•ì„ ê²€í† í•©ë‹ˆë‹¤
              3. **ìš°ì„ ìˆœìœ„ ê²°ì •**: ë¡œë“œë§µì— ë”°ë¼ ìš°ì„ ìˆœìœ„ë¥¼ ê²°ì •í•©ë‹ˆë‹¤
              4. **ê°œë°œ ê³„íš**: ê°œë°œ ì¼ì •ì„ ìˆ˜ë¦½í•©ë‹ˆë‹¤
              
              ### ğŸ¤” ê²€í†  í•­ëª©
              - ì‚¬ìš©ì ê°€ì¹˜ì™€ í•„ìš”ì„±
              - ê¸°ìˆ ì  êµ¬í˜„ ë³µì¡ë„
              - ê¸°ì¡´ ê¸°ëŠ¥ê³¼ì˜ í˜¸í™˜ì„±
              - ìœ ì§€ë³´ìˆ˜ ë¹„ìš©
              
              ### ğŸ“… ê²€í†  ì¼ì •
              ì•½ 1-2ì£¼ ë‚´ì— ê²€í†  ê²°ê³¼ë¥¼ ì•Œë ¤ë“œë¦¬ê² ìŠµë‹ˆë‹¤.
              `;
            } else if (issueTitle.includes('question') || issueTitle.includes('ì§ˆë¬¸') || issueTitle.includes('ë„ì›€')) {
              issueType = 'question';
              priority = 'low';
              template = `
              ## â“ ì§ˆë¬¸ ì ‘ìˆ˜
              
              ì•ˆë…•í•˜ì„¸ìš” @${author}ë‹˜, ì§ˆë¬¸í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!
              
              ### ğŸ“š ë„ì›€ë§ ë¦¬ì†ŒìŠ¤
              ë¨¼ì € ë‹¤ìŒ ë¦¬ì†ŒìŠ¤ë“¤ì„ í™•ì¸í•´ë³´ì„¸ìš”:
              - [í”„ë¡œì íŠ¸ README](../README.md)
              - [API ë¬¸ì„œ](../docs/)
              - [ìì£¼ ë¬»ëŠ” ì§ˆë¬¸](../docs/faq.md) (ìˆëŠ” ê²½ìš°)
              
              ### ğŸ’¬ ë‹µë³€ ì ˆì°¨
              1. **ì§ˆë¬¸ ê²€í† **: ì§ˆë¬¸ ë‚´ìš©ì„ íŒŒì•…í•©ë‹ˆë‹¤
              2. **ë‹µë³€ ì¤€ë¹„**: ëª…í™•í•˜ê³  ë„ì›€ì´ ë˜ëŠ” ë‹µë³€ì„ ì¤€ë¹„í•©ë‹ˆë‹¤
              3. **í›„ì† ì§€ì›**: ì¶”ê°€ ì§ˆë¬¸ì´ ìˆìœ¼ë©´ ì–¸ì œë“  ë¬¸ì˜í•˜ì„¸ìš”
              
              ### â° ì‘ë‹µ ì‹œê°„
              ì¼ë°˜ì ìœ¼ë¡œ 1-3ì¼ ë‚´ì— ë‹µë³€í•´ë“œë¦½ë‹ˆë‹¤.
              `;
            } else if (issueTitle.includes('documentation') || issueTitle.includes('ë¬¸ì„œ')) {
              issueType = 'documentation';
              priority = 'low';
              template = `
              ## ğŸ“– ë¬¸ì„œ ê´€ë ¨ ì´ìŠˆ ì ‘ìˆ˜
              
              ì•ˆë…•í•˜ì„¸ìš” @${author}ë‹˜, ë¬¸ì„œ ê°œì„ ì„ ìœ„í•œ ì œì•ˆ ê°ì‚¬í•©ë‹ˆë‹¤!
              
              ### ğŸ“ ë¬¸ì„œ ê°œì„  ì ˆì°¨
              1. **í˜„ì¬ ë¬¸ì„œ ê²€í† **: ì§€ì í•´ì£¼ì‹  ë¶€ë¶„ì„ í™•ì¸í•©ë‹ˆë‹¤
              2. **ê°œì„  ë°©ì•ˆ ê²€í† **: ë” ë‚˜ì€ ë¬¸ì„œí™” ë°©ë²•ì„ ëª¨ìƒ‰í•©ë‹ˆë‹¤
              3. **ë¬¸ì„œ ì—…ë°ì´íŠ¸**: ê°œì„ ëœ ë¬¸ì„œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤
              4. **ê²€í†  ë° ë°°í¬**: ìµœì¢… ê²€í†  í›„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤
              
              ### ğŸ¯ ë¬¸ì„œ í’ˆì§ˆ ëª©í‘œ
              - ëª…í™•ì„±: ì´í•´í•˜ê¸° ì‰¬ìš´ ì„¤ëª…
              - ì™„ì „ì„±: í•„ìš”í•œ ëª¨ë“  ì •ë³´ í¬í•¨
              - ìµœì‹ ì„±: í•­ìƒ ìµœì‹  ìƒíƒœ ìœ ì§€
              `;
            }

            return {
              issueType,
              priority,
              template,
              author
            };

      - name: ìë™ ëŒ“ê¸€ ë“±ë¡
        uses: actions/github-script@v6
        with:
          script: |
            const analysisResult = ${{ steps.issue-analysis.outputs.result }};

            const welcomeComment = `
            ${analysisResult.template}

            ---

            ### ğŸ·ï¸ ì´ìŠˆ ë¶„ë¥˜
            - **ìœ í˜•**: \`${analysisResult.issueType}\`
            - **ìš°ì„ ìˆœìœ„**: \`${analysisResult.priority}\`

            ### ğŸ“ ì—°ë½ì²˜
            ì¶”ê°€ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì„¸ìš”!

            *ì´ ëŒ“ê¸€ì€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.* ğŸ¤–
            `;

            await github.rest.issues.createComment({
              issue_number: context.payload.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: welcomeComment
            });
